#!/usr/bin/env node

const main = require("../dist/node");
const meowModule = import("meow");

meowModule.then((meow) => {
  const importMeta = { url: new URL("file://" + __dirname + __filename) };
  const cli = meow.default(`
	Usage
    $ tact <config_path>

	Options
    --project <project_name>, -r <project_name>  
    --version                                    Prints the current tact version
    --help                                       Displays this text

	Examples
    $ tact --version
    1.2.0
  `, { importMeta: importMeta, flags: { project: { shortFlag: "p", type: "string", isMultiple: true }, version: { shortFlag: "v", type: "boolean" }} });

  if (cli.flags.version) {
    cli.showVersion();
    return;
  }

  if (!cli.input.at(0)) {
    cli.showHelp();
    return;
  }
  
  return main.run({ configPath: cli.input.at(0), projectNames: cli.flags.project ?? [] })
});
